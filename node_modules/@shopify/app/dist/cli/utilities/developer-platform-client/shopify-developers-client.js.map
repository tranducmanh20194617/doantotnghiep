{"version":3,"file":"shopify-developers-client.js","sourceRoot":"","sources":["../../../../src/cli/utilities/developer-platform-client/shopify-developers-client.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,iBAAiB,GAGlB,MAAM,mDAAmD,CAAA;AAC1D,OAAO,EACL,qBAAqB,GAGtB,MAAM,2DAA2D,CAAA;AAClE,qJAAqJ;AACrJ,OAAO,EACL,wBAAwB,GAGzB,MAAM,2DAA2D,CAAA;AAClE,OAAO,EACL,sBAAsB,GAGvB,MAAM,wDAAwD,CAAA;AAW/D,OAAO,EAAC,mBAAmB,EAAC,MAAM,oCAAoC,CAAA;AAwCtE,OAAO,EAAC,UAAU,EAAC,MAAM,qCAAqC,CAAA;AAC9D,OAAO,EAAC,UAAU,EAAE,QAAQ,EAAC,MAAM,6BAA6B,CAAA;AAChE,OAAO,EAAC,iCAAiC,EAAC,MAAM,8CAA8C,CAAA;AAC9F,OAAO,EAAC,UAAU,EAAC,MAAM,gCAAgC,CAAA;AAEzD,MAAM,IAAI,GAAG;IACX,EAAE,EAAE,GAAG;IACP,YAAY,EAAE,UAAU;CACzB,CAAA;AAED,MAAM,OAAO,uBAAuB;IAKlC,YAAY,OAAyB;QAJ9B,yBAAoB,GAAG,IAAI,CAAA;QAC3B,8BAAyB,GAAG,IAAI,CAAA;QAIrC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAA;IACzB,CAAC;IAED,KAAK,CAAC,OAAO;QACX,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,IAAI,UAAU,EAAE,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,oFAAoF,CAAC,CAAA;aACtG;YACD,mCAAmC;YACnC,IAAI,CAAC,QAAQ,GAAG;gBACd,KAAK,EAAE,OAAO;gBACd,WAAW,EAAE;oBACX,IAAI,EAAE,aAAa;oBACnB,KAAK,EAAE,kBAAkB;iBAC1B;aACF,CAAA;SACF;QACD,OAAO,IAAI,CAAC,QAAQ,CAAA;IACtB,CAAC;IAED,KAAK,CAAC,KAAK;QACT,OAAO,CAAC,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK,CAAA;IACrC,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,OAAO,IAAI,CAAC,KAAK,EAAE,CAAA;IACrB,CAAC;IAED,KAAK,CAAC,WAAW;QACf,OAAO,CAAC,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,WAAW,CAAA;IAC3C,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,cAAqC;QACnD,MAAM,EAAC,GAAG,EAAC,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAA;QACjD,MAAM,EAAC,OAAO,EAAC,GAAG,GAAG,CAAC,aAAa,CAAC,OAAO,CAAA;QAC3C,MAAM,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,aAAa,CAAC,UAAU,KAAK,UAAU,CAAE,CAAA;QAC1F,MAAM,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,aAAa,CAAC,UAAU,KAAK,YAAY,CAAE,CAAA;QAC7F,OAAO;YACL,EAAE,EAAE,GAAG,CAAC,EAAE;YACV,KAAK,EAAE,cAAc,CAAC,MAAM,CAAC,IAAc;YAC3C,MAAM,EAAE,GAAG,CAAC,EAAE;YACd,cAAc,EAAE,cAAc,CAAC,cAAc;YAC7C,aAAa,EAAE,EAAE;YACjB,aAAa,EAAE,eAAe,CAAC,MAAM,CAAC,MAAkB;YACxD,KAAK,EAAE,EAAE;SACV,CAAA;IACH,CAAC;IAED,KAAK,CAAC,aAAa;QACjB,OAAO,CAAC,IAAI,CAAC,CAAA;IACf,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,KAAa;QAC3B,IAAI,KAAK,KAAK,GAAG;YAAE,OAAO,IAAI,CAAA;QAE9B,MAAM,IAAI,QAAQ,CAAC,oCAAoC,KAAK,EAAE,CAAC,CAAA;IACjE,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,KAAa;QAC5B,IAAI,KAAK,KAAK,GAAG,EAAE;YACjB,OAAO;gBACL,YAAY,EAAE,IAAI;gBAClB,IAAI,EAAE,EAAE;gBACR,YAAY,EAAE,KAAK;aACpB,CAAA;SACF;aAAM;YACL,MAAM,IAAI,QAAQ,CAAC,oCAAoC,KAAK,EAAE,CAAC,CAAA;SAChE;IACH,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,eAAuB,EAAE,KAAc;QACtD,OAAO;YACL,IAAI,EAAE,EAAE;YACR,YAAY,EAAE,KAAK;SACpB,CAAA;IACH,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,MAAc;QACjC,OAAO,8BAA8B,EAAE,CAAA;QAEvC,4EAA4E;QAC5E,oCAAoC;QACpC,0DAA0D;QAC1D,mIAAmI;QACnI,+CAA+C;QAC/C,wEAAwE;QACxE,2BAA2B;QAC3B,6BAA6B;QAC7B,0CAA0C;QAC1C,eAAe;QACf,wBAAwB;QACxB,sCAAsC;QACtC,WAAW;QACX,8EAA8E;QAC9E,MAAM;IACR,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,MAAc;QACzC,MAAM,IAAI,QAAQ,CAAC,yCAAyC,CAAC,CAAA;IAC/D,CAAC;IAED,KAAK,CAAC,SAAS,CACb,GAAiB,EACjB,IAAY,EACZ,OAIC;QAED,MAAM,SAAS,GAAG,aAAa,CAAC,IAAI,EAAE,OAAO,EAAE,YAAY,EAAE,OAAO,EAAE,WAAW,CAAC,CAAA;QAElF,MAAM,QAAQ,GAAG,iBAAiB,CAAA;QAClC,MAAM,MAAM,GAAG,MAAM,iCAAiC,CACpD,GAAG,CAAC,EAAE,EACN,QAAQ,EACR,MAAM,IAAI,CAAC,KAAK,EAAE,EAClB,SAAS,CACV,CAAA;QACD,IAAI,MAAM,CAAC,SAAS,CAAC,UAAU,EAAE,MAAM,GAAG,CAAC,EAAE;YAC3C,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YACnF,MAAM,IAAI,UAAU,CAAC,MAAM,CAAC,CAAA;SAC7B;QAED,gCAAgC;QAChC,MAAM,KAAK,GAAG,mBAAmB,CAAC,EAAE,CAAC,CAAA;QACrC,MAAM,UAAU,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,CAAA;QACvC,OAAO;YACL,GAAG,UAAU;YACb,KAAK,EAAE,IAAI;YACX,MAAM,EAAE,UAAU,CAAC,EAAE;YACrB,aAAa,EAAE,EAAE;YACjB,aAAa,EAAE,OAAO,EAAE,WAAW,IAAI,EAAE;YACzC,cAAc,EAAE,GAAG,CAAC,EAAE;YACtB,MAAM,EAAE,IAAI;YACZ,KAAK;SACN,CAAA;IACH,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAc;QAClC,OAAO,EAAE,CAAA;IACX,CAAC;IAED,KAAK,CAAC,yBAAyB,CAC7B,cAAqC;QAErC,MAAM,EAAC,GAAG,EAAC,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAA;QACjD,MAAM,EAAC,OAAO,EAAC,GAAG,GAAG,CAAC,aAAa,CAAC,OAAO,CAAA;QAC3C,OAAO;YACL,GAAG,EAAE;gBACH,sBAAsB,EAAE,EAAE;gBAC1B,sCAAsC,EAAE,EAAE;gBAC1C,0BAA0B,EAAE,OAAO;qBAChC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,aAAa,CAAC,UAAU,KAAK,eAAe,CAAC;qBACjE,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;oBACb,EAAE,EAAE,GAAG,CAAC,GAAG;oBACX,IAAI,EAAE,GAAG,CAAC,GAAG;oBACb,KAAK,EAAE,GAAG,CAAC,aAAa,CAAC,IAAI;oBAC7B,IAAI,EAAE,GAAG,CAAC,aAAa,CAAC,UAAU;iBACnC,CAAC,CAAC;aACN;SACF,CAAA;IACH,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,MAAc;QAC9B,MAAM,IAAI,QAAQ,CAAC,8BAA8B,CAAC,CAAA;IACpD,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAgC;QACpD,MAAM,IAAI,QAAQ,CAAC,8BAA8B,CAAC,CAAA;IACpD,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAgC;QACpD,MAAM,IAAI,QAAQ,CAAC,8BAA8B,CAAC,CAAA;IACpD,CAAC;IAED,KAAK,CAAC,gBAAgB,CAAC,EAAC,EAAE,EAAE,cAAc,EAAwB;QAChE,MAAM,KAAK,GAAG,qBAAqB,CAAA;QACnC,MAAM,SAAS,GAAmC,EAAC,KAAK,EAAE,EAAE,EAAC,CAAA;QAC7D,MAAM,MAAM,GAAG,MAAM,iCAAiC,CACpD,cAAc,EACd,KAAK,EACL,MAAM,IAAI,CAAC,KAAK,EAAE,EAClB,SAAS,CACV,CAAA;QACD,OAAO;YACL,iBAAiB,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE;gBACtE,OAAO;oBACL,cAAc,EAAE,GAAG,CAAC,GAAG;oBACvB,eAAe,EAAE,GAAG,CAAC,GAAG;oBACxB,iBAAiB,EAAE,GAAG,CAAC,MAAM;oBAC7B,IAAI,EAAE,GAAG,CAAC,aAAa,CAAC,UAAU;oBAClC,MAAM,EAAE,GAAG,CAAC,MAAM;oBAClB,aAAa,EAAE;wBACb,GAAG,GAAG,CAAC,aAAa;wBACpB,OAAO,EAAE,EAAC,oBAAoB,EAAE,KAAK,EAAC;wBACtC,UAAU,EAAE,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,EAAkD;qBACvG;iBACF,CAAA;YACH,CAAC,CAAC;YACF,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa;SAC5B,CAAA;IACH,CAAC;IAED,KAAK,CAAC,iBAAiB;QACrB,MAAM,IAAI,QAAQ,CAAC,oCAAoC,CAAC,CAAA;IAC1D,CAAC;IAED,KAAK,CAAC,uBAAuB,CAAC,MAAwC;QACpE,MAAM,IAAI,QAAQ,CAAC,0CAA0C,CAAC,CAAA;IAChE,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAiC;QACrD,MAAM,IAAI,QAAQ,CAAC,kCAAkC,CAAC,CAAA;IACxD,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,UAAU,EAAE,UAAU,EAAqB;QAC/D,MAAM,SAAS,GAAsC;YACnD,KAAK,EAAE,MAAM;YACb,UAAU,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE;gBACzC,OAAO;oBACL,GAAG,EAAE,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,MAAM;oBAC3B,uBAAuB,EAAE,GAAG,CAAC,uBAAuB,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC;oBAC9E,MAAM,EAAE,GAAG,CAAC,MAAM;oBAClB,MAAM,EAAE,GAAG,CAAC,MAAM;iBACnB,CAAA;YACH,CAAC,CAAC;YACF,UAAU;SACX,CAAA;QAED,MAAM,MAAM,GAAG,MAAM,iCAAiC,CACpD,GAAG,EACH,wBAAwB,EACxB,MAAM,IAAI,CAAC,KAAK,EAAE,EAClB,SAAS,CACV,CAAA;QACD,MAAM,EAAC,OAAO,EAAE,UAAU,EAAC,GAAG,MAAM,CAAC,aAAa,CAAA;QAClD,IAAI,CAAC,OAAO;YAAE,OAAO,EAAC,SAAS,EAAE,EAAC,UAAU,EAAC,EAA+B,CAAA;QAE5E,MAAM,aAAa,GAAG;YACpB,SAAS,EAAE;gBACT,UAAU,EAAE;oBACV,IAAI,EAAE,OAAO,CAAC,EAAE;oBAChB,qFAAqF;oBACrF,EAAE,EAAE,QAAQ,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;oBAC5B,UAAU,EAAE,OAAO,CAAC,UAAU;oBAC9B,QAAQ,EAAE,UAAU;oBACpB,iBAAiB,EAAE,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE;wBAC7C,OAAO;4BACL,IAAI,EAAE,GAAG,CAAC,GAAG;4BACb,gBAAgB,EAAE,GAAG,CAAC,GAAG;4BACzB,gBAAgB,EAAE,EAAE;yBACrB,CAAA;oBACH,CAAC,CAAC;oBACF,OAAO,EAAE,EAAE;iBACZ;gBACD,UAAU,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,EAAC,GAAG,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAC,CAAC,CAAC;aAClF;SACF,CAAA;QAED,MAAM,gBAAgB,GAAoC,EAAC,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,EAAC,CAAA;QAChG,MAAM,aAAa,GAAG,MAAM,iCAAiC,CAC3D,GAAG,EACH,sBAAsB,EACtB,MAAM,IAAI,CAAC,KAAK,EAAE,EAClB,gBAAgB,CACjB,CAAA;QACD,IAAI,aAAa,CAAC,cAAc,EAAE,UAAU,EAAE;YAC5C,aAAa,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,MAAM,CACpF,aAAa,CAAC,cAAc,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,EAAC,GAAG,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,EAAC,CAAC,CAAC,CACnG,CAAA;SACF;QAED,OAAO,aAAa,CAAA;IACtB,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,MAA2B;QACvC,MAAM,IAAI,QAAQ,CAAC,0BAA0B,CAAC,CAAA;IAChD,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,MAAc,EAAE,WAAmB;QACrD,MAAM,IAAI,QAAQ,CAAC,gCAAgC,CAAC,CAAA;IACtD,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAgC;QACpD,MAAM,IAAI,QAAQ,CAAC,kCAAkC,CAAC,CAAA;IACxD,CAAC;IAED,KAAK,CAAC,kBAAkB,CAAC,MAAsC;QAC7D,MAAM,IAAI,QAAQ,CAAC,qCAAqC,CAAC,CAAA;IAC3D,CAAC;IAED,KAAK,CAAC,sBAAsB,CAC1B,MAA0C;QAE1C,MAAM,IAAI,QAAQ,CAAC,yCAAyC,CAAC,CAAA;IAC/D,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,MAAmC;QACtD,MAAM,IAAI,QAAQ,CAAC,iCAAiC,CAAC,CAAA;IACvD,CAAC;IAED,KAAK,CAAC,iBAAiB,CAAC,MAAkC;QACxD,MAAM,IAAI,QAAQ,CAAC,oCAAoC,CAAC,CAAA;IAC1D,CAAC;IAED,KAAK,CAAC,WAAW;QACf,MAAM,IAAI,QAAQ,CAAC,8BAA8B,CAAC,CAAA;IACpD,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,MAA8B;QACzC,MAAM,IAAI,QAAQ,CAAC,yBAAyB,CAAC,CAAA;IAC/C,CAAC;IAED,KAAK,CAAC,oBAAoB,CAAC,MAAqC;QAC9D,MAAM,IAAI,QAAQ,CAAC,uCAAuC,CAAC,CAAA;IAC7D,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,MAA2B;QAC1C,MAAM,IAAI,QAAQ,CAAC,6BAA6B,CAAC,CAAA;IACnD,CAAC;IAED,KAAK,CAAC,kBAAkB;QACtB,MAAM,IAAI,QAAQ,CAAC,qCAAqC,CAAC,CAAA;IAC3D,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,MAA4C;QACvE,MAAM,IAAI,QAAQ,CAAC,yCAAyC,CAAC,CAAA;IAC/D,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,KAAwC;QAChE,MAAM,IAAI,QAAQ,CAAC,sCAAsC,CAAC,CAAA;IAC5D,CAAC;IAED,KAAK,CAAC,oBAAoB,CAAC,KAAoC;QAC7D,MAAM,IAAI,QAAQ,CAAC,uCAAuC,CAAC,CAAA;IAC7D,CAAC;IAED,sBAAsB,CAAC,KAAa;QAClC,OAAO,KAAK,CAAC,WAAW,EAAE,CAAA;IAC5B,CAAC;IAEO,KAAK,CAAC,QAAQ,CAAC,EAAC,EAAE,EAAE,cAAc,EAAwB;QAChE,MAAM,KAAK,GAAG,qBAAqB,CAAA;QACnC,MAAM,SAAS,GAAmC,EAAC,KAAK,EAAE,EAAE,EAAC,CAAA;QAC7D,OAAO,iCAAiC,CACtC,cAAc,EACd,KAAK,EACL,MAAM,IAAI,CAAC,KAAK,EAAE,EAClB,SAAS,CACV,CAAA;IACH,CAAC;CACF;AAED,mGAAmG;AACnG,8DAA8D;AAC9D,MAAM,SAAS,GAAG,2CAA2C,CAAA;AAC7D,MAAM,kBAAkB,GAAG,oDAAoD,CAAA;AAE/E,SAAS,aAAa,CAAC,IAAY,EAAE,YAAY,GAAG,IAAI,EAAE,WAAsB;IAC9E,OAAO;QACL,UAAU,EAAE;YACV;gBACE,GAAG,EAAE,UAAU;gBACf,uBAAuB,EAAE,UAAU;gBACnC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC;oBACrB,OAAO,EAAE,YAAY,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS;oBACzD,QAAQ,EAAE,YAAY;iBACvB,CAAC;aACH;YACD;gBACE,GAAG,EAAE,UAAU;gBACf,uBAAuB,EAAE,UAAU;gBACnC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,EAAC,IAAI,EAAC,CAAC;aAC/B;YACD;gBACE,GAAG,EAAE,UAAU;gBACf,uBAAuB,EAAE,UAAU;gBACnC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,EAAC,WAAW,EAAE,SAAS,EAAC,CAAC;aACjD;YACD;gBACE,GAAG,EAAE,YAAY;gBACjB,uBAAuB,EAAE,YAAY;gBACrC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC;oBACrB,sBAAsB,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC;oBAC9F,GAAG,CAAC,WAAW,IAAI,EAAC,MAAM,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC;iBACjF,CAAC;aACH;SACF;KACF,CAAA;AACH,CAAC;AAED,KAAK,UAAU,8BAA8B;IAC3C,OAAO;QACL;YACE,IAAI,EAAE,YAAY;YAClB,YAAY,EAAE,YAAY;YAC1B,kBAAkB,EAAE,YAAY;YAChC,UAAU,EAAE,YAAY;YACxB,KAAK,EAAE,KAAK;YACZ,UAAU,EAAE,eAAe;YAC3B,OAAO,EAAE;gBACP,oBAAoB,EAAE,KAAK;gBAC3B,iBAAiB,EAAE,CAAC;aACrB;YACD,QAAQ,EAAE;gBACR,IAAI,EAAE,SAAS;aAChB;SACF;QACD;YACE,IAAI,EAAE,UAAU;YAChB,YAAY,EAAE,UAAU;YACxB,kBAAkB,EAAE,UAAU;YAC9B,UAAU,EAAE,UAAU;YACtB,KAAK,EAAE,KAAK;YACZ,UAAU,EAAE,eAAe;YAC3B,OAAO,EAAE;gBACP,oBAAoB,EAAE,KAAK;gBAC3B,iBAAiB,EAAE,CAAC;aACrB;YACD,QAAQ,EAAE;gBACR,IAAI,EAAE,SAAS;aAChB;SACF;QACD;YACE,IAAI,EAAE,UAAU;YAChB,YAAY,EAAE,UAAU;YACxB,kBAAkB,EAAE,UAAU;YAC9B,UAAU,EAAE,UAAU;YACtB,KAAK,EAAE,KAAK;YACZ,UAAU,EAAE,eAAe;YAC3B,OAAO,EAAE;gBACP,oBAAoB,EAAE,KAAK;gBAC3B,iBAAiB,EAAE,CAAC;aACrB;YACD,QAAQ,EAAE;gBACR,IAAI,EAAE,SAAS;aAChB;SACF;QACD;YACE,IAAI,EAAE,UAAU;YAChB,YAAY,EAAE,UAAU;YACxB,kBAAkB,EAAE,UAAU;YAC9B,UAAU,EAAE,UAAU;YACtB,KAAK,EAAE,KAAK;YACZ,UAAU,EAAE,eAAe;YAC3B,OAAO,EAAE;gBACP,oBAAoB,EAAE,KAAK;gBAC3B,iBAAiB,EAAE,CAAC;aACrB;YACD,QAAQ,EAAE;gBACR,IAAI,EAAE,SAAS;aAChB;SACF;KACF,CAAA;AACH,CAAC","sourcesContent":["import {\n  CreateAppMutation,\n  CreateAppMutationVariables,\n  CreateAppMutationSchema,\n} from './shopify-developers-client/graphql/create-app.js'\nimport {\n  ActiveAppReleaseQuery,\n  ActiveAppReleaseQueryVariables,\n  ActiveAppReleaseQuerySchema,\n} from './shopify-developers-client/graphql/active-app-release.js'\n// import {SpecificationsQuery, SpecificationsQueryVariables, SpecificationsQuerySchema} from './shopify-developers-client/graphql/specifications.js'\nimport {\n  CreateAppVersionMutation,\n  CreateAppVersionMutationSchema,\n  CreateAppVersionMutationVariables,\n} from './shopify-developers-client/graphql/create-app-version.js'\nimport {\n  ReleaseVersionMutation,\n  ReleaseVersionMutationSchema,\n  ReleaseVersionMutationVariables,\n} from './shopify-developers-client/graphql/release-version.js'\nimport {RemoteSpecification} from '../../api/graphql/extension_specifications.js'\nimport {DeveloperPlatformClient, Paginateable, ActiveAppVersion} from '../developer-platform-client.js'\nimport {PartnersSession} from '../../../cli/services/context/partner-account-info.js'\nimport {\n  MinimalAppIdentifiers,\n  MinimalOrganizationApp,\n  Organization,\n  OrganizationApp,\n  OrganizationStore,\n} from '../../models/organization.js'\nimport {filterDisabledFlags} from '../../../cli/services/dev/fetch.js'\nimport {AllAppExtensionRegistrationsQuerySchema} from '../../api/graphql/all_app_extension_registrations.js'\nimport {\n  GenerateSignedUploadUrlSchema,\n  GenerateSignedUploadUrlVariables,\n} from '../../api/graphql/generate_signed_upload_url.js'\nimport {ExtensionUpdateDraftInput, ExtensionUpdateSchema} from '../../api/graphql/update_draft.js'\nimport {AppDeploySchema, AppDeployVariables} from '../../api/graphql/app_deploy.js'\nimport {FindStoreByDomainSchema} from '../../api/graphql/find_store_by_domain.js'\nimport {AppVersionsQuerySchema} from '../../api/graphql/get_versions_list.js'\nimport {ExtensionCreateSchema, ExtensionCreateVariables} from '../../api/graphql/extension_create.js'\nimport {\n  ConvertDevToTestStoreSchema,\n  ConvertDevToTestStoreVariables,\n} from '../../api/graphql/convert_dev_to_test_store.js'\nimport {FindAppPreviewModeSchema, FindAppPreviewModeVariables} from '../../api/graphql/find_app_preview_mode.js'\nimport {\n  DevelopmentStorePreviewUpdateInput,\n  DevelopmentStorePreviewUpdateSchema,\n} from '../../api/graphql/development_preview.js'\nimport {AppReleaseSchema, AppReleaseVariables} from '../../api/graphql/app_release.js'\nimport {AppVersionByTagSchema, AppVersionByTagVariables} from '../../api/graphql/app_version_by_tag.js'\nimport {AppVersionsDiffSchema, AppVersionsDiffVariables} from '../../api/graphql/app_versions_diff.js'\nimport {SendSampleWebhookSchema, SendSampleWebhookVariables} from '../../services/webhook/request-sample.js'\nimport {PublicApiVersionsSchema} from '../../services/webhook/request-api-versions.js'\nimport {WebhookTopicsSchema, WebhookTopicsVariables} from '../../services/webhook/request-topics.js'\nimport {\n  MigrateFlowExtensionSchema,\n  MigrateFlowExtensionVariables,\n} from '../../api/graphql/extension_migrate_flow_extension.js'\nimport {UpdateURLsSchema, UpdateURLsVariables} from '../../api/graphql/update_urls.js'\nimport {CurrentAccountInfoSchema} from '../../api/graphql/current_account_info.js'\nimport {ExtensionTemplate} from '../../models/app/template.js'\nimport {TargetSchemaDefinitionQueryVariables} from '../../api/graphql/functions/target_schema_definition.js'\nimport {ApiSchemaDefinitionQueryVariables} from '../../api/graphql/functions/api_schema_definition.js'\nimport {\n  MigrateToUiExtensionVariables,\n  MigrateToUiExtensionSchema,\n} from '../../api/graphql/extension_migrate_to_ui_extension.js'\nimport {FunctionUploadUrlGenerateResponse} from '@shopify/cli-kit/node/api/partners'\nimport {isUnitTest} from '@shopify/cli-kit/node/context/local'\nimport {AbortError, BugError} from '@shopify/cli-kit/node/error'\nimport {orgScopedShopifyDevelopersRequest} from '@shopify/cli-kit/node/api/shopify-developers'\nimport {underscore} from '@shopify/cli-kit/common/string'\n\nconst ORG1 = {\n  id: '1',\n  businessName: 'Test Org',\n}\n\nexport class ShopifyDevelopersClient implements DeveloperPlatformClient {\n  public requiresOrganization = true\n  public supportsAtomicDeployments = true\n  private _session: PartnersSession | undefined\n\n  constructor(session?: PartnersSession) {\n    this._session = session\n  }\n\n  async session(): Promise<PartnersSession> {\n    if (!this._session) {\n      if (isUnitTest()) {\n        throw new Error('ShopifyDevelopersClient.session() should not be invoked dynamically in a unit test')\n      }\n      // Need to replace with actual auth\n      this._session = {\n        token: 'token',\n        accountInfo: {\n          type: 'UserAccount',\n          email: 'mail@example.com',\n        },\n      }\n    }\n    return this._session\n  }\n\n  async token(): Promise<string> {\n    return (await this.session()).token\n  }\n\n  async refreshToken(): Promise<string> {\n    return this.token()\n  }\n\n  async accountInfo(): Promise<PartnersSession['accountInfo']> {\n    return (await this.session()).accountInfo\n  }\n\n  async appFromId(appIdentifiers: MinimalAppIdentifiers): Promise<OrganizationApp | undefined> {\n    const {app} = await this.fetchApp(appIdentifiers)\n    const {modules} = app.activeRelease.version\n    const brandingModule = modules.find((mod) => mod.specification.identifier === 'branding')!\n    const appAccessModule = modules.find((mod) => mod.specification.identifier === 'app_access')!\n    return {\n      id: app.id,\n      title: brandingModule.config.name as string,\n      apiKey: app.id,\n      organizationId: appIdentifiers.organizationId,\n      apiSecretKeys: [],\n      grantedScopes: appAccessModule.config.scopes as string[],\n      flags: [],\n    }\n  }\n\n  async organizations(): Promise<Organization[]> {\n    return [ORG1]\n  }\n\n  async orgFromId(orgId: string): Promise<Organization | undefined> {\n    if (orgId === '1') return ORG1\n\n    throw new BugError(`Can't fetch organization with id ${orgId}`)\n  }\n\n  async orgAndApps(orgId: string): Promise<Paginateable<{organization: Organization; apps: MinimalOrganizationApp[]}>> {\n    if (orgId === '1') {\n      return {\n        organization: ORG1,\n        apps: [],\n        hasMorePages: false,\n      }\n    } else {\n      throw new BugError(`Can't fetch organization with id ${orgId}`)\n    }\n  }\n\n  async appsForOrg(_organizationId: string, _term?: string): Promise<Paginateable<{apps: MinimalOrganizationApp[]}>> {\n    return {\n      apps: [],\n      hasMorePages: false,\n    }\n  }\n\n  async specifications(_appId: string): Promise<RemoteSpecification[]> {\n    return stubbedExtensionSpecifications()\n\n    // // This should be the actual query, but it's not working at the moment...\n    // const query = SpecificationsQuery\n    // const variables: SpecificationsQueryVariables = {appId}\n    // const result = await orgScopedShopifyDevelopersRequest<SpecificationsQuerySchema>(ORG1.id, query, await this.token(), variables)\n    // console.log(JSON.stringify(result, null, 2))\n    // return result.specifications.map((spec): ExtensionSpecification => ({\n    // externalName: spec.name,\n    // additionalIdentifiers: [],\n    // partnersWebIdentifier: spec.identifier,\n    // surface: '',\n    // registrationLimit: 1,\n    // appModuleFeatures: (_config) => [],\n    // ...spec,\n    // experience: spec.experience.toLowerCase() as 'extension' | 'configuration',\n    // }))\n  }\n\n  async templateSpecifications(_appId: string): Promise<ExtensionTemplate[]> {\n    throw new BugError('Not implemented: templateSpecifications')\n  }\n\n  async createApp(\n    org: Organization,\n    name: string,\n    options?: {\n      isLaunchable?: boolean\n      scopesArray?: string[]\n      directory?: string\n    },\n  ): Promise<OrganizationApp> {\n    const variables = createAppVars(name, options?.isLaunchable, options?.scopesArray)\n\n    const mutation = CreateAppMutation\n    const result = await orgScopedShopifyDevelopersRequest<CreateAppMutationSchema>(\n      org.id,\n      mutation,\n      await this.token(),\n      variables,\n    )\n    if (result.appCreate.userErrors?.length > 0) {\n      const errors = result.appCreate.userErrors.map((error) => error.message).join(', ')\n      throw new AbortError(errors)\n    }\n\n    // Need to figure this out still\n    const flags = filterDisabledFlags([])\n    const createdApp = result.appCreate.app\n    return {\n      ...createdApp,\n      title: name,\n      apiKey: createdApp.id,\n      apiSecretKeys: [],\n      grantedScopes: options?.scopesArray ?? [],\n      organizationId: org.id,\n      newApp: true,\n      flags,\n    }\n  }\n\n  async devStoresForOrg(_orgId: string): Promise<OrganizationStore[]> {\n    return []\n  }\n\n  async appExtensionRegistrations(\n    appIdentifiers: MinimalAppIdentifiers,\n  ): Promise<AllAppExtensionRegistrationsQuerySchema> {\n    const {app} = await this.fetchApp(appIdentifiers)\n    const {modules} = app.activeRelease.version\n    return {\n      app: {\n        extensionRegistrations: [],\n        dashboardManagedExtensionRegistrations: [],\n        configurationRegistrations: modules\n          .filter((mod) => mod.specification.experience === 'CONFIGURATION')\n          .map((mod) => ({\n            id: mod.uid,\n            uuid: mod.uid,\n            title: mod.specification.name,\n            type: mod.specification.identifier,\n          })),\n      },\n    }\n  }\n\n  async appVersions(_appId: string): Promise<AppVersionsQuerySchema> {\n    throw new BugError('Not implemented: appVersions')\n  }\n\n  async appVersionByTag(_input: AppVersionByTagVariables): Promise<AppVersionByTagSchema> {\n    throw new BugError('Not implemented: appVersions')\n  }\n\n  async appVersionsDiff(_input: AppVersionsDiffVariables): Promise<AppVersionsDiffSchema> {\n    throw new BugError('Not implemented: appVersions')\n  }\n\n  async activeAppVersion({id, organizationId}: MinimalAppIdentifiers): Promise<ActiveAppVersion> {\n    const query = ActiveAppReleaseQuery\n    const variables: ActiveAppReleaseQueryVariables = {appId: id}\n    const result = await orgScopedShopifyDevelopersRequest<ActiveAppReleaseQuerySchema>(\n      organizationId,\n      query,\n      await this.token(),\n      variables,\n    )\n    return {\n      appModuleVersions: result.app.activeRelease.version.modules.map((mod) => {\n        return {\n          registrationId: mod.gid,\n          registrationUid: mod.uid,\n          registrationTitle: mod.handle,\n          type: mod.specification.identifier,\n          config: mod.config,\n          specification: {\n            ...mod.specification,\n            options: {managementExperience: 'cli'},\n            experience: mod.specification.experience.toLowerCase() as 'configuration' | 'extension' | 'deprecated',\n          },\n        }\n      }),\n      ...result.app.activeRelease,\n    }\n  }\n\n  async functionUploadUrl(): Promise<FunctionUploadUrlGenerateResponse> {\n    throw new BugError('Not implemented: functionUploadUrl')\n  }\n\n  async generateSignedUploadUrl(_input: GenerateSignedUploadUrlVariables): Promise<GenerateSignedUploadUrlSchema> {\n    throw new BugError('Not implemented: generateSignedUploadUrl')\n  }\n\n  async updateExtension(_input: ExtensionUpdateDraftInput): Promise<ExtensionUpdateSchema> {\n    throw new BugError('Not implemented: updateExtension')\n  }\n\n  async deploy({apiKey, appModules, versionTag}: AppDeployVariables): Promise<AppDeploySchema> {\n    const variables: CreateAppVersionMutationVariables = {\n      appId: apiKey,\n      appModules: (appModules ?? []).map((mod) => {\n        return {\n          uid: mod.uuid ?? mod.handle,\n          specificationIdentifier: mod.specificationIdentifier ?? underscore(mod.handle),\n          handle: mod.handle,\n          config: mod.config,\n        }\n      }),\n      versionTag,\n    }\n\n    const result = await orgScopedShopifyDevelopersRequest<CreateAppVersionMutationSchema>(\n      '1',\n      CreateAppVersionMutation,\n      await this.token(),\n      variables,\n    )\n    const {version, userErrors} = result.versionCreate\n    if (!version) return {appDeploy: {userErrors}} as unknown as AppDeploySchema\n\n    const versionResult = {\n      appDeploy: {\n        appVersion: {\n          uuid: version.id,\n          // Need to deal with ID properly as it's expected to be a number... how do we use it?\n          id: parseInt(version.id, 10),\n          versionTag: version.versionTag,\n          location: 'location',\n          appModuleVersions: version.modules.map((mod) => {\n            return {\n              uuid: mod.uid,\n              registrationUuid: mod.uid,\n              validationErrors: [],\n            }\n          }),\n          message: '',\n        },\n        userErrors: userErrors?.map((err) => ({...err, category: 'deploy', details: []})),\n      },\n    }\n\n    const releaseVariables: ReleaseVersionMutationVariables = {appId: apiKey, versionId: version.id}\n    const releaseResult = await orgScopedShopifyDevelopersRequest<ReleaseVersionMutationSchema>(\n      '1',\n      ReleaseVersionMutation,\n      await this.token(),\n      releaseVariables,\n    )\n    if (releaseResult.versionRelease?.userErrors) {\n      versionResult.appDeploy.userErrors = (versionResult.appDeploy.userErrors ?? []).concat(\n        releaseResult.versionRelease.userErrors.map((err) => ({...err, category: 'release', details: []})),\n      )\n    }\n\n    return versionResult\n  }\n\n  async release(_input: AppReleaseVariables): Promise<AppReleaseSchema> {\n    throw new BugError('Not implemented: release')\n  }\n\n  async storeByDomain(_orgId: string, _shopDomain: string): Promise<FindStoreByDomainSchema> {\n    throw new BugError('Not implemented: storeByDomain')\n  }\n\n  async createExtension(_input: ExtensionCreateVariables): Promise<ExtensionCreateSchema> {\n    throw new BugError('Not implemented: createExtension')\n  }\n\n  async convertToTestStore(_input: ConvertDevToTestStoreVariables): Promise<ConvertDevToTestStoreSchema> {\n    throw new BugError('Not implemented: convertToTestStore')\n  }\n\n  async updateDeveloperPreview(\n    _input: DevelopmentStorePreviewUpdateInput,\n  ): Promise<DevelopmentStorePreviewUpdateSchema> {\n    throw new BugError('Not implemented: updateDeveloperPreview')\n  }\n\n  async appPreviewMode(_input: FindAppPreviewModeVariables): Promise<FindAppPreviewModeSchema> {\n    throw new BugError('Not implemented: appPreviewMode')\n  }\n\n  async sendSampleWebhook(_input: SendSampleWebhookVariables): Promise<SendSampleWebhookSchema> {\n    throw new BugError('Not implemented: sendSampleWebhook')\n  }\n\n  async apiVersions(): Promise<PublicApiVersionsSchema> {\n    throw new BugError('Not implemented: apiVersions')\n  }\n\n  async topics(_input: WebhookTopicsVariables): Promise<WebhookTopicsSchema> {\n    throw new BugError('Not implemented: topics')\n  }\n\n  async migrateFlowExtension(_input: MigrateFlowExtensionVariables): Promise<MigrateFlowExtensionSchema> {\n    throw new BugError('Not implemented: migrateFlowExtension')\n  }\n\n  async updateURLs(_input: UpdateURLsVariables): Promise<UpdateURLsSchema> {\n    throw new BugError('Not implemented: updateURLs')\n  }\n\n  async currentAccountInfo(): Promise<CurrentAccountInfoSchema> {\n    throw new BugError('Not implemented: currentAccountInfo')\n  }\n\n  async targetSchemaDefinition(_input: TargetSchemaDefinitionQueryVariables): Promise<string | null> {\n    throw new BugError('Not implemented: targetSchemaDefinition')\n  }\n\n  async apiSchemaDefinition(input: ApiSchemaDefinitionQueryVariables): Promise<string | null> {\n    throw new BugError('Not implemented: apiSchemaDefinition')\n  }\n\n  async migrateToUiExtension(input: MigrateToUiExtensionVariables): Promise<MigrateToUiExtensionSchema> {\n    throw new BugError('Not implemented: migrateToUiExtension')\n  }\n\n  toExtensionGraphQLType(input: string) {\n    return input.toLowerCase()\n  }\n\n  private async fetchApp({id, organizationId}: MinimalAppIdentifiers): Promise<ActiveAppReleaseQuerySchema> {\n    const query = ActiveAppReleaseQuery\n    const variables: ActiveAppReleaseQueryVariables = {appId: id}\n    return orgScopedShopifyDevelopersRequest<ActiveAppReleaseQuerySchema>(\n      organizationId,\n      query,\n      await this.token(),\n      variables,\n    )\n  }\n}\n\n// this is a temporary solution for editions to support https://vault.shopify.io/gsd/projects/31406\n// read more here: https://vault.shopify.io/gsd/projects/31406\nconst MAGIC_URL = 'https://shopify.dev/apps/default-app-home'\nconst MAGIC_REDIRECT_URL = 'https://shopify.dev/apps/default-app-home/api/auth'\n\nfunction createAppVars(name: string, isLaunchable = true, scopesArray?: string[]): CreateAppMutationVariables {\n  return {\n    appModules: [\n      {\n        uid: 'app_home',\n        specificationIdentifier: 'app_home',\n        config: JSON.stringify({\n          app_url: isLaunchable ? 'https://example.com' : MAGIC_URL,\n          embedded: isLaunchable,\n        }),\n      },\n      {\n        uid: 'branding',\n        specificationIdentifier: 'branding',\n        config: JSON.stringify({name}),\n      },\n      {\n        uid: 'webhooks',\n        specificationIdentifier: 'webhooks',\n        config: JSON.stringify({api_version: '2024-01'}),\n      },\n      {\n        uid: 'app_access',\n        specificationIdentifier: 'app_access',\n        config: JSON.stringify({\n          redirect_url_allowlist: isLaunchable ? ['https://example.com/api/auth'] : [MAGIC_REDIRECT_URL],\n          ...(scopesArray && {scopes: scopesArray.map((scope) => scope.trim()).join(',')}),\n        }),\n      },\n    ],\n  }\n}\n\nasync function stubbedExtensionSpecifications(): Promise<RemoteSpecification[]> {\n  return [\n    {\n      name: 'App access',\n      externalName: 'App access',\n      externalIdentifier: 'app_access',\n      identifier: 'app_access',\n      gated: false,\n      experience: 'configuration',\n      options: {\n        managementExperience: 'cli',\n        registrationLimit: 1,\n      },\n      features: {\n        argo: undefined,\n      },\n    },\n    {\n      name: 'App Home',\n      externalName: 'App Home',\n      externalIdentifier: 'app_home',\n      identifier: 'app_home',\n      gated: false,\n      experience: 'configuration',\n      options: {\n        managementExperience: 'cli',\n        registrationLimit: 1,\n      },\n      features: {\n        argo: undefined,\n      },\n    },\n    {\n      name: 'Branding',\n      externalName: 'Branding',\n      externalIdentifier: 'branding',\n      identifier: 'branding',\n      gated: false,\n      experience: 'configuration',\n      options: {\n        managementExperience: 'cli',\n        registrationLimit: 1,\n      },\n      features: {\n        argo: undefined,\n      },\n    },\n    {\n      name: 'Webhooks',\n      externalName: 'Webhooks',\n      externalIdentifier: 'webhooks',\n      identifier: 'webhooks',\n      gated: false,\n      experience: 'configuration',\n      options: {\n        managementExperience: 'cli',\n        registrationLimit: 1,\n      },\n      features: {\n        argo: undefined,\n      },\n    },\n  ]\n}\n"]}