{"version":3,"file":"build.js","sourceRoot":"","sources":["../../../../../src/cli/commands/app/function/build.ts"],"names":[],"mappings":";AAAA,OAAO,EAAC,iBAAiB,EAAE,aAAa,EAAC,MAAM,sCAAsC,CAAA;AACrF,OAAO,EAAC,sBAAsB,EAAC,MAAM,sCAAsC,CAAA;AAC3E,OAAO,EAAC,QAAQ,EAAC,MAAM,mBAAmB,CAAA;AAC1C,OAAO,OAAO,MAAM,oCAAoC,CAAA;AACxD,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAA;AACrD,OAAO,EAAC,aAAa,EAAC,MAAM,0BAA0B,CAAA;AAEtD,MAAqB,aAAc,SAAQ,OAAO;IAazC,KAAK,CAAC,GAAG;QACd,MAAM,EAAC,KAAK,EAAC,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,EAAa,CAAC,CAAA;QAC/C,MAAM,iBAAiB,CAAC;YACtB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,MAAM;YACxB,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,WAAW,EAAE,EAAE;gBACnC,MAAM,sBAAsB,CAAC,WAAW,EAAE;oBACxC,GAAG;oBACH,MAAM,EAAE,OAAO,CAAC,MAAM;oBACtB,MAAM,EAAE,OAAO,CAAC,MAAM;oBACtB,QAAQ,EAAE,IAAI;oBACd,WAAW,EAAE,YAAY;iBAC1B,CAAC,CAAA;gBACF,aAAa,CAAC,EAAC,QAAQ,EAAE,8BAA8B,EAAC,CAAC,CAAA;YAC3D,CAAC;SACF,CAAC,CAAA;IACJ,CAAC;;;AA5BM,qBAAO,GAAG,6BAA6B,AAAhC,CAAgC;AAEvC,qCAAuB,GAAG,6FAA6F,AAAhG,CAAgG;AAEvH,yBAAW,GAAG,EAAI,CAAC,0BAA0B,EAAE,AAApC,CAAoC;AAE/C,mBAAK,GAAG;IACb,GAAG,WAAW;IACd,GAAG,QAAQ;IACX,GAAG,aAAa;CACjB,AAJW,CAIX;eAXkB,aAAa","sourcesContent":["import {inFunctionContext, functionFlags} from '../../../services/function/common.js'\nimport {buildFunctionExtension} from '../../../services/build/extension.js'\nimport {appFlags} from '../../../flags.js'\nimport Command from '@shopify/cli-kit/node/base-command'\nimport {globalFlags} from '@shopify/cli-kit/node/cli'\nimport {renderSuccess} from '@shopify/cli-kit/node/ui'\n\nexport default class FunctionBuild extends Command {\n  static summary = 'Compile a function to wasm.'\n\n  static descriptionWithMarkdown = `Compiles the function in your current directory to WebAssembly (Wasm) for testing purposes.`\n\n  static description = this.descriptionWithoutMarkdown()\n\n  static flags = {\n    ...globalFlags,\n    ...appFlags,\n    ...functionFlags,\n  }\n\n  public async run() {\n    const {flags} = await this.parse(FunctionBuild)\n    await inFunctionContext({\n      path: flags.path,\n      configName: flags.config,\n      callback: async (app, ourFunction) => {\n        await buildFunctionExtension(ourFunction, {\n          app,\n          stdout: process.stdout,\n          stderr: process.stderr,\n          useTasks: true,\n          environment: 'production',\n        })\n        renderSuccess({headline: 'Function built successfully.'})\n      },\n    })\n  }\n}\n"]}