{"version":3,"file":"fetch-dashboard-extensions.js","sourceRoot":"","sources":["../../../src/cli/services/fetch-dashboard-extensions.ts"],"names":[],"mappings":"AAEA,MAAM,CAAC,KAAK,UAAU,4BAA4B,CAAC,EACjD,uBAAuB,EACvB,MAAM,EACN,cAAc,EACd,cAAc,GAMf;IACC,MAAM,uBAAuB,GAAG,MAAM,uBAAuB,CAAC,yBAAyB,CAAC;QACtF,EAAE,EAAE,MAAM;QACV,MAAM;QACN,cAAc;KACf,CAAC,CAAA;IACF,MAAM,EAAC,sCAAsC,EAAC,GAAG,uBAAuB,CAAC,GAAG,CAAA;IAC5E,OAAO,sCAAsC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE;QAC3D,MAAM,qBAAqB,GAAG,cAAc,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QAC/D,MAAM,gBAAgB,GAAG,GAAG,CAAC,aAAa,IAAI,GAAG,CAAC,aAAa,CAAC,MAAM,CAAA;QACtE,MAAM,eAAe,GAAG,GAAG,CAAC,YAAY,IAAI,GAAG,CAAC,YAAY,CAAC,MAAM,CAAA;QACnE,OAAO,qBAAqB,IAAI,CAAC,gBAAgB,IAAI,eAAe,CAAC,CAAA;IACvE,CAAC,CAAC,CAAA;AACJ,CAAC","sourcesContent":["import {DeveloperPlatformClient} from '../utilities/developer-platform-client.js'\n\nexport async function getActiveDashboardExtensions({\n  developerPlatformClient,\n  apiKey,\n  organizationId,\n  extensionTypes,\n}: {\n  developerPlatformClient: DeveloperPlatformClient\n  apiKey: string\n  organizationId: string\n  extensionTypes: string[]\n}) {\n  const initialRemoteExtensions = await developerPlatformClient.appExtensionRegistrations({\n    id: apiKey,\n    apiKey,\n    organizationId,\n  })\n  const {dashboardManagedExtensionRegistrations} = initialRemoteExtensions.app\n  return dashboardManagedExtensionRegistrations.filter((ext) => {\n    const isNeededExtensionType = extensionTypes.includes(ext.type)\n    const hasActiveVersion = ext.activeVersion && ext.activeVersion.config\n    const hasDraftVersion = ext.draftVersion && ext.draftVersion.config\n    return isNeededExtensionType && (hasActiveVersion || hasDraftVersion)\n  })\n}\n"]}