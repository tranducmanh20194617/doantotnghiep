{"version":3,"file":"partner-account-info.js","sourceRoot":"","sources":["../../../../src/cli/services/context/partner-account-info.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,qBAAqB,EAAC,MAAM,2CAA2C,CAAA;AAE/E,OAAO,EAAC,WAAW,EAAC,MAAM,8BAA8B,CAAA;AAuBxD,MAAM,UAAU,aAAa,CAAC,OAAoB;IAChD,OAAO,OAAO,CAAC,IAAI,KAAK,aAAa,CAAA;AACvC,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,OAAoB;IACnD,OAAO,OAAO,CAAC,IAAI,KAAK,gBAAgB,CAAA;AAC1C,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,OAAoB;IACnD,OAAO,OAAO,CAAC,IAAI,KAAK,gBAAgB,CAAA;AAC1C,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,8BAA8B,CAClD,uBAAgD;IAEhD,IAAI;QACF,OAAO,MAAM,qBAAqB,CAAC,uBAAuB,CAAC,CAAA;QAC3D,qDAAqD;KACtD;IAAC,OAAO,KAAK,EAAE;QACd,WAAW,CAAC,kCAAkC,CAAC,CAAA;QAC/C,OAAO,EAAC,IAAI,EAAE,gBAAgB,EAAC,CAAA;KAChC;AACH,CAAC","sourcesContent":["import {getCurrentAccountInfo} from '../../api/graphql/current_account_info.js'\nimport {DeveloperPlatformClient} from '../../utilities/developer-platform-client.js'\nimport {outputDebug} from '@shopify/cli-kit/node/output'\n\nexport interface PartnersSession {\n  token: string\n  accountInfo: AccountInfo\n}\n\nexport type AccountInfo = UserAccountInfo | ServiceAccountInfo | UnknownAccountInfo\n\ninterface UserAccountInfo {\n  type: 'UserAccount'\n  email: string\n}\n\ninterface ServiceAccountInfo {\n  type: 'ServiceAccount'\n  orgName: string\n}\n\ninterface UnknownAccountInfo {\n  type: 'UnknownAccount'\n}\n\nexport function isUserAccount(account: AccountInfo): account is UserAccountInfo {\n  return account.type === 'UserAccount'\n}\n\nexport function isServiceAccount(account: AccountInfo): account is ServiceAccountInfo {\n  return account.type === 'ServiceAccount'\n}\n\nexport function isUnknownAccount(account: AccountInfo): account is UnknownAccountInfo {\n  return account.type === 'UnknownAccount'\n}\n\nexport async function fetchCurrentAccountInformation(\n  developerPlatformClient: DeveloperPlatformClient,\n): Promise<AccountInfo> {\n  try {\n    return await getCurrentAccountInfo(developerPlatformClient)\n    // eslint-disable-next-line no-catch-all/no-catch-all\n  } catch (error) {\n    outputDebug('Error fetching user account info')\n    return {type: 'UnknownAccount'}\n  }\n}\n"]}